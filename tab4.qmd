---
title: "AP Exams"
---

This plot visualizes the 2020 AP exams by their mean score and the number of students who took the exam.

You can hover the cursor over the points on the plot to display extra information.

```{r}
#| echo: false
#| message: false
#| warning: false

library(readxl)
library(tidyverse)
library(gganimate)
library(gifski)
library(dplyr)
library(magick)
library(ggthemes)
library(ggplot2)
library(plotly)

score_dist <- read_xlsx(path = "data/Reformatted-Student-Score-Distributions-2020_1.xlsx")

score_dist$SD <- as.double(score_dist$SD)

score_dist <- score_dist |>
  mutate(Students = Fives + Fours + Threes + Twos + Ones,
         `Percent of Threes or Higher` = (Fives + Fours + Threes) / Students) |>
    arrange(desc(Mean))

score_dist <- score_dist |>
  ggplot(aes(Label = Exam)) +
    geom_point(aes(x = Students, y = Mean, Label2 = SD)) +
      theme_minimal() +
        scale_x_continuous(labels = scales::comma) +
          labs(title = "AP Exams by Mean Score and Number of Students (2020)",
               y = "Mean Score",
               x = "Number of Students")

ggplotly(score_dist) |>
  layout(margin = list(l = 50, r = 50, b = 100, t = 50),
         annotations = list(x = 1, y = -0.25, text = "College Board: AP Score Distributions by Subject 2020",
                            xref = 'paper', yref = 'paper', showarrow = F, 
                            xanchor = 'right', yanchor = 'auto', xshift = 0, yshift = 0,
                            font = list(size = 12)))
```